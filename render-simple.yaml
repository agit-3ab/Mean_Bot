services:
  - type: web
    name: mean-bot
    env: node
    plan: starter
    region: oregon # Change to your preferred region
    buildCommand: npm ci --only=production
    startCommand: npm start
    envVars:
      - key: NODE_ENV
        value: production
      - key: HEADLESS_MODE
        value: true
      - key: PUPPETEER_SKIP_CHROMIUM_DOWNLOAD
        value: true
      - key: PUPPETEER_EXECUTABLE_PATH
        value: /usr/bin/google-chrome-stable
      - key: PUPPETEER_ARGS
        value: "--no-sandbox,--disable-setuid-sandbox,--disable-dev-shm-usage,--disable-accelerated-2d-canvas,--no-first-run,--no-zygote,--single-process,--disable-gpu"
    # Environment variables that need to be set in Render dashboard:
    # - MONGODB_URI (MongoDB connection string)
    # - ENCRYPTION_KEY (32 character encryption key)
    # - TELEGRAM_BOT_TOKEN (from BotFather)
    # - ADMIN_TELEGRAM_BOT_TOKEN (from BotFather)
    # - ADMIN_TELEGRAM_CHAT_IDS (comma-separated chat IDs)
    # - ATTENDANCE_CHECK_TIME (e.g., "08:00")
    # - MITS_IMS_URL (e.g., "http://mitsims.in")
    # - USE_MOCK_DATA (set to "false" for production)